From f4c204a2b661cd0fe095a290ef06ee776fad470c Mon Sep 17 00:00:00 2001
From: GarethBouwer <itservices@bouwerandco.com>
Date: Wed, 4 Feb 2026 10:51:48 +0200
Subject: [PATCH 13/33] figged

---
 config.php | 26 ++++++++++++++++++++------
 1 file changed, 20 insertions(+), 6 deletions(-)

diff --git a/config.php b/config.php
index a57f1858783..ffc7cfa2953 100644
--- a/config.php
+++ b/config.php
@@ -4,14 +4,28 @@ unset($CFG);
 global $CFG;
 $CFG = new stdClass();
 
-// 1. DATABASE SETUP (PostgreSQL on Railway)
+unset($CFG);
+global $CFG;
+$CFG = new stdClass();
+
+// ========= DATABASE (PostgreSQL on Railway) =========
 $CFG->dbtype    = 'pgsql';
 $CFG->dblibrary = 'native';
-$CFG->dbhost    = 'mymoodle.railway.internal';  // value from RAILWAY_PRIVATE_DOMAIN
-$CFG->dbname    = 'railway';                      // POSTGRES_DB
-$CFG->dbuser    = 'postgres';                     // POSTGRES_USER
-$CFG->dbpass    = 'krXPKhTItzkebxZHRAsGMPgTNuTxagzv';             // POSTGRES_PASSWORD
-$CFG->prefix    = 'mdl_';                         // table prefix (leave as mdl_)
+
+// IMPORTANT: set this to the actual PGHOST value from your Postgres service
+$CFG->dbhost    = 'postgres.railway.internal';
+
+$CFG->dbname    = 'railway';  // POSTGRES_DB
+$CFG->dbuser    = 'postgres'; // POSTGRES_USER
+$CFG->dbpass    = 'krXPKhTItzkebxZHRAsGMPgTNuTxagzv'; // POSTGRES_PASSWORD
+$CFG->prefix    = 'mdl_';
+
+$CFG->dboptions = array(
+    'dbpersist' => false,
+    'dbport'    => 5432,
+    'dbsocket'  => false,
+);
+
 
 $CFG->dboptions = array(
     'dbpersist' => false,
-- 
2.48.1.windows.1

